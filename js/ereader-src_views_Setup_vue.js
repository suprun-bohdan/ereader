"use strict";(self.webpackChunkereader=self.webpackChunkereader||[]).push([["src_views_Setup_vue"],{3434(e,t,r){r.d(t,{A:()=>o});var a=r(1354),n=r.n(a),s=r(6314),d=r.n(s)()(n());d.push([e.id,"\n.ereader-setup[data-v-0fe6ef79] {\n\tpadding: 2rem;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: flex-start;\n\tmin-height: 80vh;\n}\n.ereader-setup__card[data-v-0fe6ef79] {\n\tbackground: var(--ereader-surface);\n\tborder-radius: var(--ereader-radius);\n\tbox-shadow: var(--ereader-card-shadow);\n\tpadding: 2rem;\n\tmax-width: 480px;\n\twidth: 100%;\n\tborder: 1px solid var(--ereader-border);\n}\n.ereader-setup__title[data-v-0fe6ef79] {\n\tmargin: 0 0 0.5rem;\n\tfont-size: 1.5rem;\n\tcolor: var(--ereader-text);\n}\n.ereader-setup__desc[data-v-0fe6ef79] {\n\tcolor: var(--ereader-text-secondary);\n\tmargin: 0 0 1.5rem;\n}\n.ereader-setup__breadcrumb[data-v-0fe6ef79] {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\talign-items: center;\n\tgap: 0.25rem;\n\tmargin-bottom: 1rem;\n\tfont-size: 0.9rem;\n}\n.ereader-setup__breadcrumb-item[data-v-0fe6ef79] {\n\tbackground: none;\n\tborder: none;\n\tcolor: var(--ereader-primary);\n\tcursor: pointer;\n\tpadding: 0.35rem 0.5rem;\n\tborder-radius: var(--ereader-radius-sm);\n}\n.ereader-setup__breadcrumb-item[data-v-0fe6ef79]:hover {\n\ttext-decoration: underline;\n\tbackground: var(--ereader-background);\n}\n.ereader-setup__breadcrumb-sep[data-v-0fe6ef79] {\n\tcolor: var(--ereader-text-secondary);\n}\n.ereader-setup__actions[data-v-0fe6ef79] {\n\tmargin-bottom: 1rem;\n}\n.ereader-setup__btn[data-v-0fe6ef79] {\n\tpadding: 0.6rem 1.25rem;\n\tborder-radius: var(--ereader-radius-sm);\n\tborder: none;\n\tcursor: pointer;\n\tfont-size: 1rem;\n\tfont-weight: 500;\n\ttransition: background 0.15s;\n}\n.ereader-setup__btn.primary[data-v-0fe6ef79] {\n\tbackground: var(--ereader-fill-button);\n\tcolor: var(--ereader-primary-text);\n}\n.ereader-setup__btn.primary[data-v-0fe6ef79]:hover:not(:disabled) {\n\tfilter: brightness(1.05);\n}\n.ereader-setup__btn[data-v-0fe6ef79]:disabled {\n\topacity: 0.6;\n\tcursor: not-allowed;\n}\n.ereader-setup__folders[data-v-0fe6ef79] {\n\tlist-style: none;\n\tmargin: 0;\n\tpadding: 0;\n}\n.ereader-setup__folder[data-v-0fe6ef79] {\n\tmargin: 0.25rem 0;\n}\n.ereader-setup__folder-btn[data-v-0fe6ef79] {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 0.5rem;\n\twidth: 100%;\n\ttext-align: left;\n\tpadding: 0.6rem 0.75rem;\n\tbackground: var(--ereader-background);\n\tborder: 1px solid var(--ereader-border);\n\tborder-radius: var(--ereader-radius-sm);\n\tcursor: pointer;\n\tfont-size: 1rem;\n\tcolor: var(--ereader-text);\n\ttransition: background 0.15s;\n}\n.ereader-setup__folder-btn[data-v-0fe6ef79]:hover {\n\tbackground: var(--ereader-surface);\n\tbox-shadow: var(--ereader-card-shadow);\n}\n.ereader-setup__folder--root[data-v-0fe6ef79] {\n\tmargin-bottom: 0.5rem;\n}\n.ereader-setup__folder-btn--root[data-v-0fe6ef79] {\n\tbackground: var(--ereader-primary);\n\tcolor: var(--ereader-primary-text);\n\tborder-color: var(--ereader-primary);\n\tfont-weight: 600;\n}\n.ereader-setup__folder-btn--root[data-v-0fe6ef79]:hover {\n\tfilter: brightness(1.08);\n}\n.ereader-setup__folder-icon[data-v-0fe6ef79] {\n\tfont-size: 1.2rem;\n}\n.ereader-setup__empty[data-v-0fe6ef79] {\n\tcolor: var(--ereader-text-secondary);\n\tpadding: 0.5rem 0;\n\tfont-size: 0.9rem;\n}\n.ereader-setup__loading[data-v-0fe6ef79],\n.ereader-setup__error[data-v-0fe6ef79] {\n\tmargin: 1rem 0 0;\n}\n.ereader-setup__error[data-v-0fe6ef79] {\n\tcolor: var(--ereader-error);\n}\n","",{version:3,sources:["webpack://./src/views/Setup.vue"],names:[],mappings:";AA4HA;CACC,aAAa;CACb,aAAa;CACb,uBAAuB;CACvB,uBAAuB;CACvB,gBAAgB;AACjB;AACA;CACC,kCAAkC;CAClC,oCAAoC;CACpC,sCAAsC;CACtC,aAAa;CACb,gBAAgB;CAChB,WAAW;CACX,uCAAuC;AACxC;AACA;CACC,kBAAkB;CAClB,iBAAiB;CACjB,0BAA0B;AAC3B;AACA;CACC,oCAAoC;CACpC,kBAAkB;AACnB;AACA;CACC,aAAa;CACb,eAAe;CACf,mBAAmB;CACnB,YAAY;CACZ,mBAAmB;CACnB,iBAAiB;AAClB;AACA;CACC,gBAAgB;CAChB,YAAY;CACZ,6BAA6B;CAC7B,eAAe;CACf,uBAAuB;CACvB,uCAAuC;AACxC;AACA;CACC,0BAA0B;CAC1B,qCAAqC;AACtC;AACA;CACC,oCAAoC;AACrC;AACA;CACC,mBAAmB;AACpB;AACA;CACC,uBAAuB;CACvB,uCAAuC;CACvC,YAAY;CACZ,eAAe;CACf,eAAe;CACf,gBAAgB;CAChB,4BAA4B;AAC7B;AACA;CACC,sCAAsC;CACtC,kCAAkC;AACnC;AACA;CACC,wBAAwB;AACzB;AACA;CACC,YAAY;CACZ,mBAAmB;AACpB;AACA;CACC,gBAAgB;CAChB,SAAS;CACT,UAAU;AACX;AACA;CACC,iBAAiB;AAClB;AACA;CACC,aAAa;CACb,mBAAmB;CACnB,WAAW;CACX,WAAW;CACX,gBAAgB;CAChB,uBAAuB;CACvB,qCAAqC;CACrC,uCAAuC;CACvC,uCAAuC;CACvC,eAAe;CACf,eAAe;CACf,0BAA0B;CAC1B,4BAA4B;AAC7B;AACA;CACC,kCAAkC;CAClC,sCAAsC;AACvC;AACA;CACC,qBAAqB;AACtB;AACA;CACC,kCAAkC;CAClC,kCAAkC;CAClC,oCAAoC;CACpC,gBAAgB;AACjB;AACA;CACC,wBAAwB;AACzB;AACA;CACC,iBAAiB;AAClB;AACA;CACC,oCAAoC;CACpC,iBAAiB;CACjB,iBAAiB;AAClB;AACA;;CAEC,gBAAgB;AACjB;AACA;CACC,2BAA2B;AAC5B",sourcesContent:["<template>\n\t<div class=\"ereader-setup\">\n\t\t<div class=\"ereader-setup__card\">\n\t\t\t<h1 class=\"ereader-setup__title\">{{ t('ereader', 'Choose your books folder') }}</h1>\n\t\t\t<p class=\"ereader-setup__desc\">{{ t('ereader', 'Select the folder where your EPUB and PDF books are stored. You can also scan all your files.') }}</p>\n\n\t\t\t<div v-if=\"loading\" class=\"ereader-setup__loading\">{{ t('ereader', 'Loading‚Ä¶') }}</div>\n\n\t\t\t<template v-else>\n\t\t\t\t<p v-if=\"error\" class=\"ereader-setup__error ereader-setup__error--top\">{{ error }}</p>\n\n\t\t\t\t<div class=\"ereader-setup__breadcrumb\">\n\t\t\t\t\t<button type=\"button\" class=\"ereader-setup__breadcrumb-item\" @click=\"path = ''\">\n\t\t\t\t\t\t{{ t('ereader', 'Home') }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<template v-for=\"(part, i) in pathParts\" :key=\"i\">\n\t\t\t\t\t\t<span class=\"ereader-setup__breadcrumb-sep\">/</span>\n\t\t\t\t\t\t<button type=\"button\" class=\"ereader-setup__breadcrumb-item\" @click=\"path = pathParts.slice(0, i + 1).join('/')\">\n\t\t\t\t\t\t\t{{ part }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"ereader-setup__actions\">\n\t\t\t\t\t<button type=\"button\" class=\"ereader-setup__btn primary\" :disabled=\"saving\" @click=\"selectCurrent\">\n\t\t\t\t\t\t{{ path === '' ? t('ereader', 'Scan all my files') : t('ereader', 'Use this folder') }}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t\t<ul class=\"ereader-setup__folders\">\n\t\t\t\t\t<li class=\"ereader-setup__folder ereader-setup__folder--root\">\n\t\t\t\t\t\t<button type=\"button\" class=\"ereader-setup__folder-btn ereader-setup__folder-btn--root\" @click=\"selectCurrent\">\n\t\t\t\t\t\t\t<span class=\"ereader-setup__folder-icon\">üìÅ</span>\n\t\t\t\t\t\t\t{{ path === '' ? t('ereader', 'My files ‚Äî use as books folder') : t('ereader', 'Use this folder as books location') }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-for=\"folder in folders\" :key=\"folder.path || folder.name\" class=\"ereader-setup__folder\">\n\t\t\t\t\t\t<button type=\"button\" class=\"ereader-setup__folder-btn\" @click=\"path = folder.path || ''\">\n\t\t\t\t\t\t\t<span class=\"ereader-setup__folder-icon\">üìÅ</span>\n\t\t\t\t\t\t\t{{ folder.name }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"folders.length === 0 && !loading\" class=\"ereader-setup__empty\">\n\t\t\t\t\t\t{{ t('ereader', 'No subfolders in this folder. Use the option above to select this location.') }}\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</template>\n\n\t\t\t<p v-if=\"error\" class=\"ereader-setup__error\">{{ error }}</p>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { getFolders, setConfig } from '../router/api'\nimport { translate as t } from '@nextcloud/l10n'\n\nexport default {\n\tname: 'Setup',\n\tdata() {\n\t\treturn {\n\t\t\tpath: '',\n\t\t\tfolders: [],\n\t\t\tloading: true,\n\t\t\tsaving: false,\n\t\t\terror: '',\n\t\t}\n\t},\n\tcomputed: {\n\t\tpathParts() {\n\t\t\treturn this.path ? this.path.split('/').filter(Boolean) : []\n\t\t},\n\t},\n\twatch: {\n\t\tpath: {\n\t\t\timmediate: true,\n\t\t\thandler() {\n\t\t\t\tthis.loadFolders()\n\t\t\t},\n\t\t},\n\t},\n\tmethods: {\n\t\tt,\n\t\tasync loadFolders() {\n\t\t\tthis.loading = true\n\t\t\tthis.error = ''\n\t\t\ttry {\n\t\t\t\tconst data = await getFolders(this.path)\n\t\t\t\tif (data && typeof data === 'object') {\n\t\t\t\t\tthis.folders = Array.isArray(data.folders) ? data.folders : (Array.isArray(data) ? data : [])\n\t\t\t\t\tthis.error = data.error ? String(data.error) : ''\n\t\t\t\t} else {\n\t\t\t\t\tthis.folders = Array.isArray(data) ? data : []\n\t\t\t\t\tthis.error = data && data.error ? String(data.error) : ''\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconst res = e.response\n\t\t\t\tconst errBody = res?.data\n\t\t\t\tconst errMsg = (errBody && typeof errBody === 'object' && (errBody.error || errBody.message))\n\t\t\t\t\t? (errBody.error || errBody.message)\n\t\t\t\t\t: (res?.data ? String(res.data) : e.message)\n\t\t\t\tthis.error = errMsg || this.t('ereader', 'Failed to load folders')\n\t\t\t\tthis.folders = []\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\t\tasync selectCurrent() {\n\t\t\tthis.saving = true\n\t\t\tthis.error = ''\n\t\t\ttry {\n\t\t\t\tawait setConfig(this.path)\n\t\t\t\tthis.$router.replace({ name: 'Library' })\n\t\t\t} catch (e) {\n\t\t\t\tthis.error = e.message || this.t('ereader', 'Failed to save')\n\t\t\t} finally {\n\t\t\t\tthis.saving = false\n\t\t\t}\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n.ereader-setup {\n\tpadding: 2rem;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: flex-start;\n\tmin-height: 80vh;\n}\n.ereader-setup__card {\n\tbackground: var(--ereader-surface);\n\tborder-radius: var(--ereader-radius);\n\tbox-shadow: var(--ereader-card-shadow);\n\tpadding: 2rem;\n\tmax-width: 480px;\n\twidth: 100%;\n\tborder: 1px solid var(--ereader-border);\n}\n.ereader-setup__title {\n\tmargin: 0 0 0.5rem;\n\tfont-size: 1.5rem;\n\tcolor: var(--ereader-text);\n}\n.ereader-setup__desc {\n\tcolor: var(--ereader-text-secondary);\n\tmargin: 0 0 1.5rem;\n}\n.ereader-setup__breadcrumb {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\talign-items: center;\n\tgap: 0.25rem;\n\tmargin-bottom: 1rem;\n\tfont-size: 0.9rem;\n}\n.ereader-setup__breadcrumb-item {\n\tbackground: none;\n\tborder: none;\n\tcolor: var(--ereader-primary);\n\tcursor: pointer;\n\tpadding: 0.35rem 0.5rem;\n\tborder-radius: var(--ereader-radius-sm);\n}\n.ereader-setup__breadcrumb-item:hover {\n\ttext-decoration: underline;\n\tbackground: var(--ereader-background);\n}\n.ereader-setup__breadcrumb-sep {\n\tcolor: var(--ereader-text-secondary);\n}\n.ereader-setup__actions {\n\tmargin-bottom: 1rem;\n}\n.ereader-setup__btn {\n\tpadding: 0.6rem 1.25rem;\n\tborder-radius: var(--ereader-radius-sm);\n\tborder: none;\n\tcursor: pointer;\n\tfont-size: 1rem;\n\tfont-weight: 500;\n\ttransition: background 0.15s;\n}\n.ereader-setup__btn.primary {\n\tbackground: var(--ereader-fill-button);\n\tcolor: var(--ereader-primary-text);\n}\n.ereader-setup__btn.primary:hover:not(:disabled) {\n\tfilter: brightness(1.05);\n}\n.ereader-setup__btn:disabled {\n\topacity: 0.6;\n\tcursor: not-allowed;\n}\n.ereader-setup__folders {\n\tlist-style: none;\n\tmargin: 0;\n\tpadding: 0;\n}\n.ereader-setup__folder {\n\tmargin: 0.25rem 0;\n}\n.ereader-setup__folder-btn {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 0.5rem;\n\twidth: 100%;\n\ttext-align: left;\n\tpadding: 0.6rem 0.75rem;\n\tbackground: var(--ereader-background);\n\tborder: 1px solid var(--ereader-border);\n\tborder-radius: var(--ereader-radius-sm);\n\tcursor: pointer;\n\tfont-size: 1rem;\n\tcolor: var(--ereader-text);\n\ttransition: background 0.15s;\n}\n.ereader-setup__folder-btn:hover {\n\tbackground: var(--ereader-surface);\n\tbox-shadow: var(--ereader-card-shadow);\n}\n.ereader-setup__folder--root {\n\tmargin-bottom: 0.5rem;\n}\n.ereader-setup__folder-btn--root {\n\tbackground: var(--ereader-primary);\n\tcolor: var(--ereader-primary-text);\n\tborder-color: var(--ereader-primary);\n\tfont-weight: 600;\n}\n.ereader-setup__folder-btn--root:hover {\n\tfilter: brightness(1.08);\n}\n.ereader-setup__folder-icon {\n\tfont-size: 1.2rem;\n}\n.ereader-setup__empty {\n\tcolor: var(--ereader-text-secondary);\n\tpadding: 0.5rem 0;\n\tfont-size: 0.9rem;\n}\n.ereader-setup__loading,\n.ereader-setup__error {\n\tmargin: 1rem 0 0;\n}\n.ereader-setup__error {\n\tcolor: var(--ereader-error);\n}\n</style>\n"],sourceRoot:""}]);const o=d},4897(e,t,r){r.r(t),r.d(t,{default:()=>W});var a=r(641),n=r(33);const s={class:"ereader-setup"},d={class:"ereader-setup__card"},o={class:"ereader-setup__title"},i={class:"ereader-setup__desc"},A={key:0,class:"ereader-setup__loading"},l={key:0,class:"ereader-setup__error ereader-setup__error--top"},C={class:"ereader-setup__breadcrumb"},u=["onClick"],p={class:"ereader-setup__actions"},c=["disabled"],f={class:"ereader-setup__folders"},_={class:"ereader-setup__folder ereader-setup__folder--root"},m=["onClick"],b={key:0,class:"ereader-setup__empty"},h={key:2,class:"ereader-setup__error"};var v=r(249),g=r(3334);const B={name:"Setup",data:()=>({path:"",folders:[],loading:!0,saving:!1,error:""}),computed:{pathParts(){return this.path?this.path.split("/").filter(Boolean):[]}},watch:{path:{immediate:!0,handler(){this.loadFolders()}}},methods:{t:g.Tl,async loadFolders(){this.loading=!0,this.error="";try{const e=await(0,v.aq)(this.path);e&&"object"==typeof e?(this.folders=Array.isArray(e.folders)?e.folders:Array.isArray(e)?e:[],this.error=e.error?String(e.error):""):(this.folders=Array.isArray(e)?e:[],this.error=e&&e.error?String(e.error):"")}catch(e){const t=e.response,r=t?.data,a=r&&"object"==typeof r&&(r.error||r.message)?r.error||r.message:t?.data?String(t.data):e.message;this.error=a||this.t("ereader","Failed to load folders"),this.folders=[]}finally{this.loading=!1}},async selectCurrent(){this.saving=!0,this.error="";try{await(0,v.Nk)(this.path),this.$router.replace({name:"Library"})}catch(e){this.error=e.message||this.t("ereader","Failed to save")}finally{this.saving=!1}}}};var y=r(5072),k=r.n(y),x=r(7825),w=r.n(x),L=r(7659),S=r.n(L),F=r(5056),z=r.n(F),E=r(540),X=r.n(E),j=r(1113),P=r.n(j),U=r(3434),Y={};Y.styleTagTransform=P(),Y.setAttributes=z(),Y.insert=S().bind(null,"head"),Y.domAPI=w(),Y.insertStyleElement=X();k()(U.A,Y);U.A&&U.A.locals&&U.A.locals;const W=(0,r(6262).A)(B,[["render",function(e,t,r,v,g,B){return(0,a.uX)(),(0,a.CE)("div",s,[(0,a.Lk)("div",d,[(0,a.Lk)("h1",o,(0,n.v_)(B.t("ereader","Choose your books folder")),1),(0,a.Lk)("p",i,(0,n.v_)(B.t("ereader","Select the folder where your EPUB and PDF books are stored. You can also scan all your files.")),1),g.loading?((0,a.uX)(),(0,a.CE)("div",A,(0,n.v_)(B.t("ereader","Loading‚Ä¶")),1)):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[g.error?((0,a.uX)(),(0,a.CE)("p",l,(0,n.v_)(g.error),1)):(0,a.Q3)("",!0),(0,a.Lk)("div",C,[(0,a.Lk)("button",{type:"button",class:"ereader-setup__breadcrumb-item",onClick:t[0]||(t[0]=e=>g.path="")},(0,n.v_)(B.t("ereader","Home")),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(B.pathParts,(e,r)=>((0,a.uX)(),(0,a.CE)(a.FK,{key:r},[t[3]||(t[3]=(0,a.Lk)("span",{class:"ereader-setup__breadcrumb-sep"},"/",-1)),(0,a.Lk)("button",{type:"button",class:"ereader-setup__breadcrumb-item",onClick:e=>g.path=B.pathParts.slice(0,r+1).join("/")},(0,n.v_)(e),9,u)],64))),128))]),(0,a.Lk)("div",p,[(0,a.Lk)("button",{type:"button",class:"ereader-setup__btn primary",disabled:g.saving,onClick:t[1]||(t[1]=(...e)=>B.selectCurrent&&B.selectCurrent(...e))},(0,n.v_)(""===g.path?B.t("ereader","Scan all my files"):B.t("ereader","Use this folder")),9,c)]),(0,a.Lk)("ul",f,[(0,a.Lk)("li",_,[(0,a.Lk)("button",{type:"button",class:"ereader-setup__folder-btn ereader-setup__folder-btn--root",onClick:t[2]||(t[2]=(...e)=>B.selectCurrent&&B.selectCurrent(...e))},[t[4]||(t[4]=(0,a.Lk)("span",{class:"ereader-setup__folder-icon"},"üìÅ",-1)),(0,a.eW)(" "+(0,n.v_)(""===g.path?B.t("ereader","My files ‚Äî use as books folder"):B.t("ereader","Use this folder as books location")),1)])]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(g.folders,e=>((0,a.uX)(),(0,a.CE)("li",{key:e.path||e.name,class:"ereader-setup__folder"},[(0,a.Lk)("button",{type:"button",class:"ereader-setup__folder-btn",onClick:t=>g.path=e.path||""},[t[5]||(t[5]=(0,a.Lk)("span",{class:"ereader-setup__folder-icon"},"üìÅ",-1)),(0,a.eW)(" "+(0,n.v_)(e.name),1)],8,m)]))),128)),0!==g.folders.length||g.loading?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("li",b,(0,n.v_)(B.t("ereader","No subfolders in this folder. Use the option above to select this location.")),1))])],64)),g.error?((0,a.uX)(),(0,a.CE)("p",h,(0,n.v_)(g.error),1)):(0,a.Q3)("",!0)])])}],["__scopeId","data-v-0fe6ef79"]])}}]);
//# sourceMappingURL=ereader-src_views_Setup_vue.js.map?v=e367d3daaa823a0ba24f