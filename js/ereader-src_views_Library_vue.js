"use strict";(self.webpackChunkereader=self.webpackChunkereader||[]).push([["src_views_Library_vue"],{546(e,r,t){t.r(r),t.d(r,{default:()=>F});var n=t(641),a=t(33);const o={class:"ereader-library"},d={class:"ereader-library__header"},i={class:"ereader-library__title"},s={key:0,class:"ereader-library__loading"},A={key:1,class:"ereader-library__error"},l={key:2,class:"ereader-library__list"},C={key:0,class:"ereader-library__empty"};var c=t(249),b=t(3334);const m={class:"book-card"},p={class:"book-card__cover"},k={class:"book-card__cover-icon","aria-hidden":!0},u={class:"book-card__name"};const _={name:"BookCard",props:{book:{type:Object,required:!0,validator:e=>void 0!==e.id&&"string"==typeof e.name}},computed:{coverIcon(){const e=this.book.mime;return"application/pdf"===e?"ðŸ“•":"application/epub+zip"===e?"ðŸ“˜":"ðŸ“—"}}};var v=t(5072),B=t.n(v),y=t(7825),f=t.n(y),g=t(7659),h=t.n(g),x=t(5056),w=t.n(x),E=t(540),I=t.n(E),q=t(1113),L=t.n(q),j=t(8055),S={};S.styleTagTransform=L(),S.setAttributes=w(),S.insert=h().bind(null,"head"),S.domAPI=f(),S.insertStyleElement=I();B()(j.A,S);j.A&&j.A.locals&&j.A.locals;var z=t(6262);const D={name:"Library",components:{BookCard:(0,z.A)(_,[["render",function(e,r,t,o,d,i){const s=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("li",m,[(0,n.bF)(s,{to:{name:"Read",params:{fileId:t.book.id},query:{mime:t.book.mime}},class:"book-card__link"},{default:(0,n.k6)(()=>[(0,n.Lk)("div",p,[(0,n.Lk)("span",k,(0,a.v_)(i.coverIcon),1)]),(0,n.Lk)("span",u,(0,a.v_)(t.book.name),1)]),_:1},8,["to"])])}],["__scopeId","data-v-41a4bf8a"]])},data:()=>({books:[],loading:!0,error:""}),async mounted(){try{const e=await(0,c.zy)();this.books=Array.isArray(e)?e:e?.books??[]}catch(e){this.error=e.message||(0,b.Tl)("ereader","Failed to load books")}finally{this.loading=!1}},methods:{t:b.Tl}};var P=t(9470),T={};T.styleTagTransform=L(),T.setAttributes=w(),T.insert=h().bind(null,"head"),T.domAPI=f(),T.insertStyleElement=I();B()(P.A,T);P.A&&P.A.locals&&P.A.locals;const F=(0,z.A)(D,[["render",function(e,r,t,c,b,m){const p=(0,n.g2)("router-link"),k=(0,n.g2)("BookCard");return(0,n.uX)(),(0,n.CE)("div",o,[(0,n.Lk)("header",d,[(0,n.Lk)("h1",i,(0,a.v_)(m.t("ereader","Library")),1),(0,n.bF)(p,{to:{name:"Setup"},class:"ereader-library__setup-link"},{default:(0,n.k6)(()=>[(0,n.eW)((0,a.v_)(m.t("ereader","Change books folder")),1)]),_:1})]),b.loading?((0,n.uX)(),(0,n.CE)("div",s,(0,a.v_)(m.t("ereader","Loadingâ€¦")),1)):b.error?((0,n.uX)(),(0,n.CE)("div",A,(0,a.v_)(b.error),1)):((0,n.uX)(),(0,n.CE)("ul",l,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(b.books,e=>((0,n.uX)(),(0,n.Wv)(k,{key:e.id,book:e},null,8,["book"]))),128)),0===b.books.length?((0,n.uX)(),(0,n.CE)("li",C,(0,a.v_)(m.t("ereader","No books found. Add EPUB or PDF files to your books folder.")),1)):(0,n.Q3)("",!0)]))])}],["__scopeId","data-v-0a59ea5f"]])},8055(e,r,t){t.d(r,{A:()=>i});var n=t(1354),a=t.n(n),o=t(6314),d=t.n(o)()(a());d.push([e.id,"\n.book-card[data-v-41a4bf8a] {\n\tmargin: 0;\n\tlist-style: none;\n}\n.book-card__link[data-v-41a4bf8a] {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\ttext-decoration: none;\n\tcolor: var(--ereader-text);\n\tpadding: 0.75rem;\n\tborder-radius: var(--ereader-radius);\n\tbackground: var(--ereader-surface);\n\tbox-shadow: var(--ereader-card-shadow);\n\ttransition: transform 0.15s, box-shadow 0.15s;\n}\n.book-card__link[data-v-41a4bf8a]:hover {\n\ttransform: translateY(-2px);\n\tbox-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);\n}\n.book-card__cover[data-v-41a4bf8a] {\n\twidth: 80px;\n\theight: 110px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tbackground: var(--ereader-background);\n\tborder-radius: var(--ereader-radius-sm);\n\tmargin-bottom: 0.5rem;\n\tborder: 1px solid var(--ereader-border);\n}\n.book-card__cover-icon[data-v-41a4bf8a] {\n\tfont-size: 2.5rem;\n}\n.book-card__name[data-v-41a4bf8a] {\n\tfont-size: 0.9rem;\n\ttext-align: center;\n\tword-break: break-word;\n\tline-height: 1.3;\n}\n","",{version:3,sources:["webpack://./src/components/BookCard.vue"],names:[],mappings:";AAyCA;CACC,SAAS;CACT,gBAAgB;AACjB;AAEA;CACC,aAAa;CACb,sBAAsB;CACtB,mBAAmB;CACnB,qBAAqB;CACrB,0BAA0B;CAC1B,gBAAgB;CAChB,oCAAoC;CACpC,kCAAkC;CAClC,sCAAsC;CACtC,6CAA6C;AAC9C;AAEA;CACC,2BAA2B;CAC3B,0CAA0C;AAC3C;AAEA;CACC,WAAW;CACX,aAAa;CACb,aAAa;CACb,mBAAmB;CACnB,uBAAuB;CACvB,qCAAqC;CACrC,uCAAuC;CACvC,qBAAqB;CACrB,uCAAuC;AACxC;AAEA;CACC,iBAAiB;AAClB;AAEA;CACC,iBAAiB;CACjB,kBAAkB;CAClB,sBAAsB;CACtB,gBAAgB;AACjB",sourcesContent:["<template>\n\t<li class=\"book-card\">\n\t\t<router-link\n\t\t\t:to=\"{ name: 'Read', params: { fileId: book.id }, query: { mime: book.mime } }\"\n\t\t\tclass=\"book-card__link\"\n\t\t>\n\t\t\t<div class=\"book-card__cover\">\n\t\t\t\t<span class=\"book-card__cover-icon\" :aria-hidden=\"true\">{{ coverIcon }}</span>\n\t\t\t</div>\n\t\t\t<span class=\"book-card__name\">{{ book.name }}</span>\n\t\t</router-link>\n\t</li>\n</template>\n\n<script>\nconst MIME_PDF = 'application/pdf'\nconst MIME_EPUB = 'application/epub+zip'\n\nexport default {\n\tname: 'BookCard',\n\tprops: {\n\t\tbook: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t\tvalidator(b) {\n\t\t\t\treturn typeof b.id !== 'undefined' && typeof b.name === 'string'\n\t\t\t},\n\t\t},\n\t},\n\tcomputed: {\n\t\tcoverIcon() {\n\t\t\tconst m = this.book.mime\n\t\t\tif (m === MIME_PDF) return 'ðŸ“•'\n\t\t\tif (m === MIME_EPUB) return 'ðŸ“˜'\n\t\t\treturn 'ðŸ“—'\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n.book-card {\n\tmargin: 0;\n\tlist-style: none;\n}\n\n.book-card__link {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\ttext-decoration: none;\n\tcolor: var(--ereader-text);\n\tpadding: 0.75rem;\n\tborder-radius: var(--ereader-radius);\n\tbackground: var(--ereader-surface);\n\tbox-shadow: var(--ereader-card-shadow);\n\ttransition: transform 0.15s, box-shadow 0.15s;\n}\n\n.book-card__link:hover {\n\ttransform: translateY(-2px);\n\tbox-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);\n}\n\n.book-card__cover {\n\twidth: 80px;\n\theight: 110px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tbackground: var(--ereader-background);\n\tborder-radius: var(--ereader-radius-sm);\n\tmargin-bottom: 0.5rem;\n\tborder: 1px solid var(--ereader-border);\n}\n\n.book-card__cover-icon {\n\tfont-size: 2.5rem;\n}\n\n.book-card__name {\n\tfont-size: 0.9rem;\n\ttext-align: center;\n\tword-break: break-word;\n\tline-height: 1.3;\n}\n</style>\n"],sourceRoot:""}]);const i=d},9470(e,r,t){t.d(r,{A:()=>i});var n=t(1354),a=t.n(n),o=t(6314),d=t.n(o)()(a());d.push([e.id,"\n.ereader-library[data-v-0a59ea5f] {\n\tpadding: 1.5rem;\n\tmin-height: 100%;\n\tbackground: var(--ereader-shelf-background);\n\tborder-top: 3px solid var(--ereader-shelf-divider);\n}\n.ereader-library__header[data-v-0a59ea5f] {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\talign-items: center;\n\tjustify-content: space-between;\n\tgap: 1rem;\n\tmargin-bottom: 1.5rem;\n}\n.ereader-library__title[data-v-0a59ea5f] {\n\tmargin: 0;\n\tfont-size: 1.5rem;\n\tcolor: var(--ereader-text);\n}\n.ereader-library__setup-link[data-v-0a59ea5f] {\n\tfont-size: 0.9rem;\n\tcolor: var(--ereader-primary);\n\ttext-decoration: none;\n\tfont-weight: 500;\n}\n.ereader-library__setup-link[data-v-0a59ea5f]:hover {\n\ttext-decoration: underline;\n}\n.ereader-library__list[data-v-0a59ea5f] {\n\tlist-style: none;\n\tmargin: 0;\n\tpadding: 0;\n\tdisplay: grid;\n\tgrid-template-columns: repeat(auto-fill, minmax(140px, 1fr));\n\tgap: 1.25rem;\n}\n.ereader-library__loading[data-v-0a59ea5f],\n.ereader-library__error[data-v-0a59ea5f],\n.ereader-library__empty[data-v-0a59ea5f] {\n\tpadding: 2rem;\n\ttext-align: center;\n\tcolor: var(--ereader-text-secondary);\n}\n.ereader-library__error[data-v-0a59ea5f] {\n\tcolor: var(--ereader-error);\n}\n","",{version:3,sources:["webpack://./src/views/Library.vue"],names:[],mappings:";AAoDA;CACC,eAAe;CACf,gBAAgB;CAChB,2CAA2C;CAC3C,kDAAkD;AACnD;AACA;CACC,aAAa;CACb,eAAe;CACf,mBAAmB;CACnB,8BAA8B;CAC9B,SAAS;CACT,qBAAqB;AACtB;AACA;CACC,SAAS;CACT,iBAAiB;CACjB,0BAA0B;AAC3B;AACA;CACC,iBAAiB;CACjB,6BAA6B;CAC7B,qBAAqB;CACrB,gBAAgB;AACjB;AACA;CACC,0BAA0B;AAC3B;AACA;CACC,gBAAgB;CAChB,SAAS;CACT,UAAU;CACV,aAAa;CACb,4DAA4D;CAC5D,YAAY;AACb;AACA;;;CAGC,aAAa;CACb,kBAAkB;CAClB,oCAAoC;AACrC;AACA;CACC,2BAA2B;AAC5B",sourcesContent:["<template>\n\t<div class=\"ereader-library\">\n\t\t<header class=\"ereader-library__header\">\n\t\t\t<h1 class=\"ereader-library__title\">{{ t('ereader', 'Library') }}</h1>\n\t\t\t<router-link :to=\"{ name: 'Setup' }\" class=\"ereader-library__setup-link\">\n\t\t\t\t{{ t('ereader', 'Change books folder') }}\n\t\t\t</router-link>\n\t\t</header>\n\n\t\t<div v-if=\"loading\" class=\"ereader-library__loading\">{{ t('ereader', 'Loadingâ€¦') }}</div>\n\t\t<div v-else-if=\"error\" class=\"ereader-library__error\">{{ error }}</div>\n\t\t<ul v-else class=\"ereader-library__list\">\n\t\t\t<BookCard v-for=\"book in books\" :key=\"book.id\" :book=\"book\" />\n\t\t\t<li v-if=\"books.length === 0\" class=\"ereader-library__empty\">\n\t\t\t\t{{ t('ereader', 'No books found. Add EPUB or PDF files to your books folder.') }}\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</template>\n\n<script>\nimport { getBooks } from '../router/api'\nimport { translate as t } from '@nextcloud/l10n'\nimport BookCard from '../components/BookCard.vue'\n\nexport default {\n\tname: 'Library',\n\tcomponents: { BookCard },\n\tdata() {\n\t\treturn {\n\t\t\tbooks: [],\n\t\t\tloading: true,\n\t\t\terror: '',\n\t\t}\n\t},\n\tasync mounted() {\n\t\ttry {\n\t\t\tconst data = await getBooks()\n\t\t\tthis.books = Array.isArray(data) ? data : (data?.books ?? [])\n\t\t} catch (e) {\n\t\t\tthis.error = e.message || t('ereader', 'Failed to load books')\n\t\t} finally {\n\t\t\tthis.loading = false\n\t\t}\n\t},\n\tmethods: {\n\t\tt,\n\t},\n}\n<\/script>\n\n<style scoped>\n.ereader-library {\n\tpadding: 1.5rem;\n\tmin-height: 100%;\n\tbackground: var(--ereader-shelf-background);\n\tborder-top: 3px solid var(--ereader-shelf-divider);\n}\n.ereader-library__header {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\talign-items: center;\n\tjustify-content: space-between;\n\tgap: 1rem;\n\tmargin-bottom: 1.5rem;\n}\n.ereader-library__title {\n\tmargin: 0;\n\tfont-size: 1.5rem;\n\tcolor: var(--ereader-text);\n}\n.ereader-library__setup-link {\n\tfont-size: 0.9rem;\n\tcolor: var(--ereader-primary);\n\ttext-decoration: none;\n\tfont-weight: 500;\n}\n.ereader-library__setup-link:hover {\n\ttext-decoration: underline;\n}\n.ereader-library__list {\n\tlist-style: none;\n\tmargin: 0;\n\tpadding: 0;\n\tdisplay: grid;\n\tgrid-template-columns: repeat(auto-fill, minmax(140px, 1fr));\n\tgap: 1.25rem;\n}\n.ereader-library__loading,\n.ereader-library__error,\n.ereader-library__empty {\n\tpadding: 2rem;\n\ttext-align: center;\n\tcolor: var(--ereader-text-secondary);\n}\n.ereader-library__error {\n\tcolor: var(--ereader-error);\n}\n</style>\n"],sourceRoot:""}]);const i=d}}]);
//# sourceMappingURL=ereader-src_views_Library_vue.js.map?v=2727ef0a6b036b87606a